#include "messaging/VulnerabilityJsonSerializer.hh"

#include "bridge/Partnership.hh"
#include "bridge/Vulnerability.hh"

using nlohmann::json;

namespace Bridge {

void to_json(json& j, const Vulnerability& vulnerability)
{
    j[PARTNERSHIP_TO_STRING_MAP.left.at(Partnership::NORTH_SOUTH)] =
        vulnerability.northSouthVulnerable;
    j[PARTNERSHIP_TO_STRING_MAP.left.at(Partnership::EAST_WEST)] =
        vulnerability.eastWestVulnerable;
}

void from_json(const nlohmann::json& j, Vulnerability& vulnerability)
{
    vulnerability.northSouthVulnerable =
        j.at(PARTNERSHIP_TO_STRING_MAP.left.at(Partnership::NORTH_SOUTH));
    vulnerability.eastWestVulnerable =
        j.at(PARTNERSHIP_TO_STRING_MAP.left.at(Partnership::EAST_WEST));
}

}
