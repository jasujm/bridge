#include "bridge/Partnership.hh"
#include "bridge/Vulnerability.hh"

#include <ostream>
#include <stdexcept>

namespace Bridge {

bool isVulnerable(
    const Vulnerability& vulnerability, const Partnership partnership)
{
    switch (partnership.get())  {
    case PartnershipLabel::NORTH_SOUTH:
        return vulnerability.northSouthVulnerable;
    case PartnershipLabel::EAST_WEST:
        return vulnerability.eastWestVulnerable;
    default:
        throw std::invalid_argument("Invalid partnership");
    }
}

bool operator==(const Vulnerability& lhs, const Vulnerability& rhs)
{
    return lhs.northSouthVulnerable == rhs.northSouthVulnerable &&
         lhs.eastWestVulnerable == rhs.eastWestVulnerable;
}

std::ostream& operator<<(std::ostream& os, const Vulnerability& vulnerability)
{
    return os << Partnerships::NORTH_SOUTH_VALUE << ": " <<
        vulnerability.northSouthVulnerable << ", " <<
        Partnerships::EAST_WEST_VALUE << ": " <<
        vulnerability.eastWestVulnerable;

}

}
